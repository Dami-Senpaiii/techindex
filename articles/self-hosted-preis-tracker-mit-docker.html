<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="icon" href="/favicon.svg" type="image/svg+xml" />
  <link rel="shortcut icon" href="/favicon.svg" type="image/svg+xml" />

  <title>Self-Hosted Preis-Tracker mit Docker – TechIndex</title>
  <meta name="description" content="Baue einen eigenen Preis-Tracker mit Docker, Scrapy und Prometheus – komplett selbst gehostet." />
  <meta name="theme-color" content="#0a0a0a" />
  <style>
    :root{
      --bg:#0a0a0a;
      --panel:#121212;
      --muted:#a1a1a1;
      --text:#fff;
      --border:#1f1f1f;
      --accent:#76B900;
      --accent-weak:#5e9400;
      --radius:18px;
      --shadow:0 10px 30px rgba(0,0,0,.35);
      --max:880px;
    }
    *{box-sizing:border-box}
    html,body{margin:0;background:var(--bg);color:var(--text);font:17px/1.65 "Inter",system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial,sans-serif}
    a{color:inherit;text-decoration:none}
    a:hover{color:var(--accent)}
    img{max-width:100%;display:block}
    .container{max-width:var(--max);padding:0 24px;margin:0 auto}
    .nav{position:sticky;top:0;z-index:50;background:rgba(0,0,0,.82);backdrop-filter:blur(8px);border-bottom:1px solid var(--border)}
    .nav-inner{display:flex;align-items:center;justify-content:space-between;padding:14px 0}
    .brand{display:flex;gap:12px;align-items:center;font-weight:720;letter-spacing:-.01em}
    .brand-badge{width:30px;height:30px;border:2px solid var(--accent);border-radius:10px;display:grid;place-items:center}
    .brand-badge svg{stroke:var(--accent)}
    .menu{display:flex;gap:18px;font-size:.95rem}
    .menu a{color:#eaeaea;opacity:.85}
    .menu a:hover{opacity:1}
    main{padding:56px 0 80px}
    .post{display:block}
    .post-header{margin-bottom:32px}
    .post-tag{display:inline-flex;align-items:center;gap:6px;padding:6px 12px;border:1px solid var(--border);border-radius:999px;font-size:.85rem;background:rgba(118,185,0,.08);color:#d7ffd7}
    .post h1{margin:18px 0 10px;font-size:clamp(30px,5vw,44px);line-height:1.15;letter-spacing:-.015em}
    .post-meta{color:var(--muted);font-size:.95rem;margin-bottom:14px}
    .lead{color:#d6ffd6;font-size:1.1rem;max-width:720px}
    figure.hero{margin:0 0 36px;border-radius:var(--radius);overflow:hidden;border:1px solid var(--border);background:linear-gradient(180deg,rgba(255,255,255,.03),rgba(255,255,255,.01))}
    figure.hero img{width:100%;height:auto}
    figure.hero figcaption{padding:12px 16px;color:var(--muted);font-size:.9rem}
    .post section{margin-bottom:42px}
    .post section h2{font-size:clamp(22px,3vw,30px);margin:0 0 14px;letter-spacing:-.01em}
    .post section p{margin:0 0 16px}
    .post section ul{padding-left:20px;margin:0 0 18px}
    .post section li{margin-bottom:10px}
    .callout{border:1px solid var(--border);border-radius:var(--radius);padding:18px 20px;background:rgba(118,185,0,.05);margin:24px 0;color:#e4ffe4}
    .callout h3{margin:0 0 12px;font-size:1.05rem}
    pre{background:#101010;border:1px solid var(--border);border-radius:14px;padding:16px;overflow:auto;font-family:"JetBrains Mono","Fira Code",monospace;font-size:.9rem;line-height:1.5}
    blockquote{margin:0;padding:18px 24px;border-left:4px solid var(--accent);background:rgba(255,255,255,.05);border-radius:0 14px 14px 0}
    blockquote p{margin:0;color:#e2e2e2}
    .post-footer{border-top:1px solid var(--border);padding-top:24px;margin-top:32px;display:flex;flex-direction:column;gap:12px}
    .back-link{display:inline-flex;align-items:center;gap:10px;font-weight:600;color:var(--accent)}
    .taglist{color:var(--muted);font-size:.9rem}
    footer{border-top:1px solid var(--border);padding:32px 0;background:#090909}
    footer .muted{color:var(--muted);font-size:.9rem}
    @media (max-width:720px){
      main{padding:44px 0 64px}
      .nav-inner{flex-direction:column;gap:14px}
      .menu{flex-wrap:wrap;justify-content:center}
    }
  </style>
</head>
<body>
  <header class="nav">
    <div class="container nav-inner">
      <a class="brand" href="../index.html">
        <span class="brand-badge">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke-width="2">
            <path d="M4 4h16v4H4z" stroke="currentColor" />
            <path d="M4 10h10v4H4z" stroke="currentColor" />
            <path d="M4 16h16v4H4z" stroke="currentColor" />
          </svg>
        </span>
        TechIndex
      </a>
      <nav class="menu" aria-label="Hauptnavigation">
        <a href="../index.html">Magazin</a>
        <a href="../about.html">Über uns</a>
        <a href="#kommentare">Kommentare</a>
      </nav>
    </div>
  </header>

  <main>
    <article class="post container">
      <header class="post-header">
        <span class="post-tag">Software</span>
        <h1>Self-Hosted Preis-Tracker mit Docker</h1>
        <p class="post-meta">Aktualisiert: 25. Oktober 2025 · Lesezeit: 8 Minuten</p>
        <p class="lead">Immer den besten Deal im Blick – ohne fremde APIs. Wir bauen einen Docker-Stack aus Scrapy, PostgreSQL und Prometheus, der Preise von Schweizer Shops abfragt und dich bei Drops sofort informiert.</p>
      </header>

      <figure class="hero">
        <img src="https://picsum.photos/seed/self-hosted-preis-tracker-mit-docker/1200/630" alt="Server-Rack mit Docker-Logos und Preisdiagramm">
        <figcaption>Self-Hosted heisst: volle Kontrolle über Daten, Frequenz und Benachrichtigungen.</figcaption>
      </figure>

      <section>
        <h2>Stack-Überblick &amp; Architektur</h2>
        <p>Unser Stack besteht aus vier Containern: Scrapy crawler, PostgreSQL, Prometheus und Alertmanager. Optional ergänzt Grafana das Set für Visualisierungen. Alle Services laufen auf einem kleinen Proxmox-LXC mit 4 GB RAM.</p>
        <div class="callout">
          <h3>Docker-Compose-Grundgerüst</h3>
<pre>version: "3.8"
services:
  crawler:
    image: ghcr.io/techindex/swiss-price-crawler:2025.10
    environment:
      - SCHEDULE=*/30 * * * *
    depends_on:
      - db
    networks: [stack]
  db:
    image: postgres:16-alpine
    environment:
      - POSTGRES_PASSWORD=secret
    volumes:
      - db-data:/var/lib/postgresql/data
    networks: [stack]
  prometheus:
    image: prom/prometheus:v2.53.0
    volumes:
      - ./prometheus.yml:/etc/prometheus/prometheus.yml
    networks: [stack]
volumes:
  db-data:
networks:
  stack:
    driver: bridge</pre>
        </div>
        <p>Alle Container teilen sich ein internes Netzwerk. Der Crawler pusht Metriken an Prometheus (Pushgateway oder direkter Exporter), während die Preis-Daten in PostgreSQL landen.</p>
      </section>

      <section>
        <h2>Scraper-Logik &amp; Datenbankmodell</h2>
        <p>Scrapy liefert robuste Spider, die HTML, JSON oder GraphQL-APIs abholen. Wir setzen auf modulare Spider pro Shop. Jeder Lauf erstellt eine Tabelle <code>price_events</code> mit Produkt-ID, Preis, Timestamp und Quelle. Duplicate Keys verhindern unnötige Inserts.</p>
        <p>Ein Materialized View verdichtet die Daten für schnelle Vergleiche. Für Währungs-Schwankungen nutzen wir die Swiss National Bank API, die stündlich Wechselkurse liefert.</p>
      </section>

      <section>
        <h2>Alerts, Dashboards &amp; Automatisierung</h2>
        <p>Prometheus-Regeln prüfen Preisänderungen von mehr als 7 % innerhalb von 24 Stunden. Fällt ein Preis unter deinen Zielwert, schickt Alertmanager eine Nachricht via Matrix oder Signal-Relay. Für seltene Produkte kannst du alternative Schwellenwerte pro SKU definieren.</p>
        <blockquote>
          <p>„Alerts ohne Kontext nerven. Kombiniere Preisverlauf, Lagerbestand und Lieferzeit für smarte Entscheidungen.“</p>
        </blockquote>
        <p>Automation-Tipp: Nutze ein kleines Python-Skript, das jeden Morgen eine CSV mit relevanten Preisbewegungen generiert und per Nextcloud in dein Team-Share legt.</p>
      </section>

      <footer class="post-footer">
        <a class="back-link" href="../index.html">← Zurück zur Übersicht</a>
        <p class="taglist">Schlagworte: Docker, Self-Hosting, Prometheus, Preisvergleich</p>
      </footer>
    </article>
  </main>

  <footer>
    <div class="container">
      <div class="muted">© 2025 TechIndex.ch — Schweizer Tech-Blog für Hardware, Software & Fotografie.</div>
    </div>
  </footer>
</body>
</html>
